(()=>{"use strict";var e,t={313:()=>{const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.primitives,i=window.ReactJSXRuntime,a=(0,i.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(n.Path,{fillRule:"evenodd",d:"M6.5 8a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zM8 5a3 3 0 100 6 3 3 0 000-6zm6.5 11a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zm1.5-3a3 3 0 100 6 3 3 0 000-6zM5.47 17.41a.75.75 0 001.06 1.06L18.47 6.53a.75.75 0 10-1.06-1.06L5.47 17.41z",clipRule:"evenodd"})}),l=window.wp.blockEditor,o=window.wp.components,r=(0,i.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(n.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),s=window.wp.element,p=(0,i.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(n.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),c=(0,i.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(n.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),u=({index:e,conditional:n,onSaveConditionals:a,onRemoveConditional:l})=>{var r,u,d;const[m,h]=(0,s.useState)("url_parameter"),[g,_]=(0,s.useState)(),[v,x]=(0,s.useState)(n.conditionalKey||""),[j,w]=(0,s.useState)(null!==(r=n.operator)&&void 0!==r?r:"is"),[z,b]=(0,s.useState)(null!==(u=n.value)&&void 0!==u?u:""),[f,S]=(0,s.useState)(null!==(d=n.showDetails)&&void 0!==d&&d);return void 0===g&&("utm_medium"===v?_("utm_medium"):"utm_source"===v?_("utm_source"):"utm_campaign"===v&&_("utm_campaign")),(0,i.jsxs)(i.Fragment,{children:[!1===f&&(0,i.jsxs)("div",{className:"conditional-container",children:[(0,i.jsxs)("div",{className:"buttons",children:[(0,i.jsx)(o.Button,{onClick:()=>S(!0),variant:"link",icon:p,size:"small",iconSize:20}),(0,i.jsx)(o.Button,{onClick:()=>l(e),variant:"link",icon:c,size:"small",iconSize:20})]}),(0,i.jsx)("div",{className:"info",children:"url_parameter"===m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["utm_medium"===g&&(0,t.__)("UTM Medium in URL:","planet4-gpch-plugin-optimize"),"utm_source"===g&&(0,t.__)("UTM Source in URL:","planet4-gpch-plugin-optimize"),"utm_campaign"===g&&(0,t.__)("UTM Campaign in URL:","planet4-gpch-plugin-optimize"),"url_parameter"===g&&(0,t.__)("URL Parameter:","planet4-gpch-plugin-optimize")]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:v}),(0,i.jsxs)("span",{children:["is"===j&&" == ","is_not"===j&&" != ","contains"===j&&" contains ","does_not_contain"===j&&" does not contain "]}),(0,i.jsx)("code",{children:z})]})]})})]}),!0===f&&(0,i.jsxs)("div",{className:"conditional-container",children:[(0,i.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Force this variant when","planet4-gpch-plugin-optimize"),onChange:e=>{"utm_medium"===e?(h("url_parameter"),_(e),x("utm_medium")):"utm_source"===e?(h("url_parameter"),_(e),x("utm_source")):"utm_campaign"===e?(h("url_parameter"),_(e),x("utm_campaign")):(_(e),h(e))},options:[{label:(0,t.__)("Query parameter in URL","planet4-gpch-plugin-optimize"),value:"url_parameter"},{label:(0,t.__)("utm_medium in URL","planet4-gpch-plugin-optimize"),value:"utm_medium"},{label:(0,t.__)("utm_source in URL","planet4-gpch-plugin-optimize"),value:"utm_source"},{label:(0,t.__)("utm_campaign in URL","planet4-gpch-plugin-optimize"),value:"utm_campaign"}],value:g}),(0,i.jsxs)("div",{className:"conditional-details",children:["utm_medium"!==g&&"utm_source"!==g&&"utm_campaign"!==g&&(0,i.jsx)(o.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Key","planet4-gpch-plugin-optimize"),onChange:x,value:v}),(0,i.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Operator","planet4-gpch-plugin-optimize"),onChange:w,value:j,options:[{label:(0,t.__)("is (==)","planet4-gpch-plugin-optimize"),value:"is"},{label:(0,t.__)("is not (!=)","planet4-gpch-plugin-optimize"),value:"is_not"},{label:(0,t.__)("contains","planet4-gpch-plugin-optimize"),value:"contains"},{label:(0,t.__)("does not contain","planet4-gpch-plugin-optimize"),value:"does_not_contain"}]}),(0,i.jsx)(o.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Value","planet4-gpch-plugin-optimize"),onChange:b,value:z}),(0,i.jsx)(o.Button,{onClick:()=>(S(!1),void a({index:e,type:m,conditionalKey:v,operator:j,value:z,showDetails:!1})),variant:"primary",children:(0,t.__)("Save","planet4-gpch-plugin-optimize")}),(0,i.jsx)(o.Button,{onClick:()=>l(e),variant:"secondary",isDestructive:!0,children:(0,t.__)("Remove","planet4-gpch-plugin-optimize")})]})]})]})},d=({conditionals:e,setAttributes:n})=>{const[a,l]=(0,s.useState)(0),p=t=>{e[t.index]=t},c=t=>{const i=e.filter(((e,n)=>n!==t));n({conditionals:i}),l(i.length)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.PanelBody,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("b",{children:(0,t.__)("Force this variant when either","planet4-gpch-plugin-optimize")})}),(0,i.jsx)("div",{className:"conditionals-container",children:e.map(((e,t)=>(0,i.jsx)(u,{index:t,conditional:e,onSaveConditionals:p,onRemoveConditional:c},t)))}),(0,i.jsx)(o.Button,{__next40pxDefaultSize:!0,variant:"secondary",icon:r,iconSize:20,className:"add-conditional-button",onClick:()=>(n({conditionals:[...e,{showDetails:!0}]}),void l(a+1)),children:(0,t.__)("Add Condition","planet4-gpch-plugin-optimize")})]})})},m=JSON.parse('{"UU":"planet4-gpch-plugin-optimize/variant"}');(0,e.registerBlockType)(m.UU,{icon:function(){return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"icon",viewBox:"0 0 30.7 30.7",children:[(0,i.jsx)("path",{fill:"#131313",d:"M30 30.7h-8V3.5a1.6 1.6 0 0 1 1.6-1.6h4.7c1 0 1.6.8 1.6 1.6v27.2Zm-6.7-1.3h5.3V3.5c0-.2-.1-.3-.2-.3h-4.8l-.2.1v26.1Zm-4 1.3h-8V10c0-.8.7-1.4 1.5-1.4h5c.9 0 1.5.6 1.5 1.4v20.7Zm-6.6-1.3H18V10l-.2-.1h-5l-.2.1v19.4zm-4 1.3h-8V16.4c0-.8.7-1.3 1.4-1.3h5.3c.7 0 1.3.5 1.3 1.3zm-6.6-1.3h5.3v-13H2.1Z"}),(0,i.jsx)("path",{fill:"#121212",d:"M22.9 2.7h6.3v27h-6.3z"})]})},edit:function({attributes:e,setAttributes:n,context:r}){let{variantId:s,variantName:p,targetPercentage:c,conditionals:u}=e;if(void 0===s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=8;s="";for(let n=0;n<t;n++)s+=e.charAt(Math.floor(Math.random()*e.length));n({variantId:s})}return void 0===p&&(p=s),void 0===c&&(c=50),void 0===u&&(u=[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.InspectorControls,{children:[(0,i.jsxs)(o.PanelBody,{title:(0,t.__)("Variant Settings","planet4-gpch-plugin-optimize"),children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("b",{children:"Variant ID: "}),s||""]}),(0,i.jsx)(o.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,t.__)("Variant Name","planet4-gpch-plugin-optimize"),value:p||"",onChange:e=>n({variantName:e}),help:(0,t.__)("Used to identify the Variant in Mixpanel. Feel free to use a readable name. Don't change once the experiment has started!","planet4-gpch-plugin-optimize")})]}),(0,i.jsx)(o.PanelBody,{title:(0,t.__)("Targeting","planet4-gpch-plugin-optimize"),children:(0,i.jsx)(o.RangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:"Target group percentage",afterIcon:a,value:c,onChange:e=>n({targetPercentage:e}),min:0,max:100,step:1,marks:[{value:25,label:"25%"},{value:50,label:"50%"},{value:75,label:"75%"},{value:100,label:"100%"}],railColor:"red",trackColor:"green"})}),(0,i.jsx)(d,{conditionals:u,setAttributes:n})]}),(0,i.jsx)("div",{children:e.variantId===r["content-optimization/editorSelectedVariantId"]&&(0,i.jsx)("div",{...(0,l.useBlockProps)(),children:(0,i.jsx)(l.InnerBlocks,{})})})]})},save:function({attributes:e}){return(0,i.jsx)("div",{...l.useBlockProps.save({className:"gp-optimize-variant"}),"data-target-percentage":e.targetPercentage,"data-variant-id":e.variantId,"data-variant-name":e.variantName,"data-conditionals":JSON.stringify(e.conditionals),children:(0,i.jsx)(l.InnerBlocks.Content,{})})}})}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,i),l.exports}i.m=t,e=[],i.O=(t,n,a,l)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,a,l]=e[c],r=!0,s=0;s<n.length;s++)(!1&l||o>=l)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(r=!1,l<o&&(o=l));if(r){e.splice(c--,1);var p=a();void 0!==p&&(t=p)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,a,l]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={222:0,290:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[o,r,s]=n,p=0;if(o.some((t=>0!==e[t]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(s)var c=s(i)}for(t&&t(n);p<o.length;p++)l=o[p],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(c)},n=globalThis.webpackChunkplanet4_gpch_pluigin_optimize=globalThis.webpackChunkplanet4_gpch_pluigin_optimize||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[290],(()=>i(313)));a=i.O(a)})();