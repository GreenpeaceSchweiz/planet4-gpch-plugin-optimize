(()=>{"use strict";var t,e={864:()=>{const t=window.wp.blocks,e=window.wp.i18n,i=window.wp.blockEditor,n=window.wp.data,a=window.wp.element,o=(0,a.forwardRef)((function({icon:t,size:e=24,...i},n){return(0,a.cloneElement)(t,{width:e,height:e,...i,ref:n})})),s=window.wp.primitives,l=window.ReactJSXRuntime,r=(0,l.jsx)(s.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)(s.Path,{d:"M10.97 10.159a3.382 3.382 0 0 0-2.857.955l1.724 1.723-2.836 2.913L7 17h1.25l2.913-2.837 1.723 1.723a3.38 3.38 0 0 0 .606-.825c.33-.63.446-1.343.35-2.032L17 10.695 13.305 7l-2.334 3.159Z"})}),c=(0,l.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(s.Path,{d:"M2 12C2 6.44444 6.44444 2 12 2C17.5556 2 22 6.44444 22 12C22 17.5556 17.5556 22 12 22C6.44444 22 2 17.5556 2 12ZM13 11V7H11V11H7V13H11V17H13V13H17V11H13Z"})}),p=window.wp.components;function h(){return(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"icon",viewBox:"0 0 30.7 30.7",children:[(0,l.jsx)("path",{fill:"#131313",d:"M30 30.7h-8V3.5a1.6 1.6 0 0 1 1.6-1.6h4.7c1 0 1.6.8 1.6 1.6v27.2Zm-6.7-1.3h5.3V3.5c0-.2-.1-.3-.2-.3h-4.8l-.2.1v26.1Zm-4 1.3h-8V10c0-.8.7-1.4 1.5-1.4h5c.9 0 1.5.6 1.5 1.4v20.7Zm-6.6-1.3H18V10l-.2-.1h-5l-.2.1v19.4zm-4 1.3h-8V16.4c0-.8.7-1.3 1.4-1.3h5.3c.7 0 1.3.5 1.3 1.3zm-6.6-1.3h5.3v-13H2.1Z"}),(0,l.jsx)("path",{fill:"#121212",d:"M22.9 2.7h6.3v27h-6.3z"})]})}const d=[["planet4-gpch-plugin-optimize/variant",{variantName:"Variant A"}],["planet4-gpch-plugin-optimize/variant",{variantName:"Variant B"}]],m=JSON.parse('{"UU":"planet4-gpch-plugin-optimize/content-optimization"}');(0,t.registerBlockType)(m.UU,{icon:function(){return(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",className:"icon",viewBox:"0 0 30.72 30.72",children:[(0,l.jsx)("path",{fill:"#131313",d:"M30.4 30.77h-8.2V2.75a1.6 1.6 0 0 1 1.63-1.63h4.92c.9 0 1.6.76 1.6 1.63v28.02Zm-6.83-1.36h5.5V2.75c0-.15-.16-.27-.28-.27h-4.92c-.09 0-.15.03-.18.09-.06.03-.1.1-.1.18v26.66zm-4.2 1.4h-8.15V9.48c0-.85.7-1.48 1.54-1.48h5.16c.85 0 1.51.66 1.51 1.48V30.8Zm-6.8-1.37h5.5V9.5c0-.07-.09-.13-.18-.13h-5.16c-.1 0-.18.06-.18.13v19.95Zm-4.04 1.33H.32V16.01c0-.73.63-1.33 1.36-1.33h5.5c.72 0 1.35.6 1.35 1.33zm-6.85-1.36h5.5v-13.4h-5.5Zm9.78-22.34a.68.68 0 0 1-.51-.82l.84-3.38-3.4-.84a.71.71 0 0 1-.52-.82c.09-.36.48-.57.84-.48l4.68 1.15-1.14 4.7c-.06.37-.43.58-.79.49Z"}),(0,l.jsx)("path",{fill:"#131313",d:"M2.18 9.2a.7.7 0 0 1-.4-.32c-.2-.34-.11-.73.22-.9L12 1.9a.66.66 0 0 1 .93.21c.18.34.1.73-.24.94l-10 6.07c-.15.09-.33.12-.5.09z"}),(0,l.jsx)("path",{fill:"#121212",d:"M23.2 2.18h6.17v27.8H23.2ZM1.57 15.25H7.5v14.83H1.56ZM12.28 9.1h6.49v20.78h-6.5z"})]})},edit:function({clientId:t,attributes:a,setAttributes:s}){const{status:m}=a;let{optimizationId:g,optimizationName:v,editorSelectedVariantIndex:u}=a;const w=(0,n.useSelect)((e=>e("core/block-editor").getBlocks(t)),[t]);if(void 0===g){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=16;g="";for(let i=0;i<e;i++)g+=t.charAt(Math.floor(Math.random()*t.length));s({optimizationId:g})}return void 0===v&&(v=g),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.InspectorControls,{children:(0,l.jsxs)(p.PanelBody,{title:(0,e.__)("Settings","planet4-gpch-plugin-optimize"),children:[(0,l.jsx)(p.ToggleControl,{checked:!!m,label:(0,e.__)("Enable/Disable the Optimization","planet4-gpch-plugin-optimize"),onChange:()=>s({status:!m}),help:(0,e.__)("Disabling the Optimization will show the first variant to everyone.","planet4-gpch-plugin-optimize")}),(0,l.jsxs)("p",{children:[(0,l.jsx)("b",{children:"Optimization ID: "}),g||""]}),(0,l.jsx)(p.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,e.__)("Experiment Name","planet4-gpch-plugin-optimize"),value:v||"",onChange:t=>{/^[A-Za-z0-9 -]*$/.test(t)?s({optimizationName:t}):alert((0,e.__)("Please use only letters, numbers, spaces and dashes.","planet4-gpch-plugin-optimize"))},help:(0,e.__)("Used to identify the Optimization in Mixpanel. Feel free to use a readable name. Don't change once the experiment has started!","planet4-gpch-plugin-optimize")})]})}),(0,l.jsxs)("div",{...(0,i.useBlockProps)(),children:[(0,l.jsxs)("div",{className:"variant-selector-container",children:[(0,l.jsxs)("p",{className:"optimization-info",children:[(0,l.jsxs)("strong",{children:[(0,e.__)("Content Optimization:","planet4-gpch-plugin-optimize")," ",v]}),v===g&&(0,l.jsx)("span",{children:(0,e.__)("(Feel free to set a human redable name!)","planet4-gpch-plugin-optimize")})]}),(0,l.jsxs)("div",{className:"variant-buttons",children:[w.length>0?w.map(((t,e)=>(0,l.jsxs)(p.Button,{__next40pxDefaultSize:!0,variant:"secondary",icon:h,iconSize:20,className:"variant-button "+(u===e?"is-active":""),onClick:()=>(t=>{for(const[e,i]of w.entries())e===t&&(s({editorSelectedVariantId:i.attributes.variantId,editorSelectedVariantIndex:e}),wp.data.dispatch("core/block-editor").selectBlock(i.clientId))})(e),children:[t.attributes.variantName," (",""===t.attributes.targetPercentage&&"50",""!==t.attributes.targetPercentage&&t.attributes.targetPercentage,"%",void 0!==t.attributes.conditionals&&0!==t.attributes.conditionals.length&&(0,l.jsx)(o,{icon:r,className:"pin-icon",size:24}),")"]},e))):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)(p.Button,{__next40pxDefaultSize:!0,variant:"primary",icon:c,className:"add-variant-button",onClick:()=>{const e=wp.blocks.createBlock("planet4-gpch-plugin-optimize/variant",{variantName:`Variant ${w.length+1}`});wp.data.dispatch("core/editor").insertBlock(e,w.length,t)},children:(0,e.__)("Add Variant","planet4-gpch-plugin-optimize")})]}),!0!==m&&(0,l.jsx)("p",{className:"optimization-disabled",children:(0,e.__)("This content optimization is disabled. The website shows the first variant.","planet4-gpch-plugin-optimize")})]}),(0,l.jsx)("div",{className:"variant-content",children:(0,l.jsx)(i.InnerBlocks,{template:d})})]})]})},save:function({attributes:t}){return(0,l.jsx)("div",{...i.useBlockProps.save({className:"gp-optimize-container"}),"data-status":t.status,"data-optimization-id":t.optimizationId,"data-optimization-name":t.optimizationName,children:(0,l.jsx)(i.InnerBlocks.Content,{})})}})}},i={};function n(t){var a=i[t];if(void 0!==a)return a.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,i,a,o)=>{if(!i){var s=1/0;for(p=0;p<t.length;p++){for(var[i,a,o]=t[p],l=!0,r=0;r<i.length;r++)(!1&o||s>=o)&&Object.keys(n.O).every((t=>n.O[t](i[r])))?i.splice(r--,1):(l=!1,o<s&&(s=o));if(l){t.splice(p--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var p=t.length;p>0&&t[p-1][2]>o;p--)t[p]=t[p-1];t[p]=[i,a,o]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={306:0,966:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var a,o,[s,l,r]=i,c=0;if(s.some((e=>0!==t[e]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(r)var p=r(n)}for(e&&e(i);c<s.length;c++)o=s[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(p)},i=globalThis.webpackChunkplanet4_gpch_plugin_optimize=globalThis.webpackChunkplanet4_gpch_plugin_optimize||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var a=n.O(void 0,[966],(()=>n(864)));a=n.O(a)})();